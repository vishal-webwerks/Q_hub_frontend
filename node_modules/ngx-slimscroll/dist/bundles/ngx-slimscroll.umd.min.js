!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("rxjs/Observable"),require("rxjs/Subscription"),require("rxjs/add/observable/fromEvent"),require("rxjs/add/observable/merge"),require("rxjs/add/operator/mergeMap"),require("rxjs/add/operator/takeUntil"),require("rxjs/add/operator/map")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","rxjs/Observable","rxjs/Subscription","rxjs/add/observable/fromEvent","rxjs/add/observable/merge","rxjs/add/operator/mergeMap","rxjs/add/operator/takeUntil","rxjs/add/operator/map"],t):t(e["ngx-slimscroll"]={},e.ng.core,e.ng.common,e.Rx,e.Rx)}(this,function(e,t,r,i,n){"use strict";var s=function(){return function(e){this.type=e.type,this.y=e&&e.y?e.y:0,this.percent=e&&e.percent?e.percent:0,this.duration=e&&e.duration?e.duration:0,this.easing=e&&e.easing?e.easing:"linear"}}(),o=function(){return function(e){this.position=e&&e.position?e.position:"right",this.barBackground=e&&e.barBackground?e.barBackground:"#343a40",this.barOpacity=e&&e.barOpacity?e.barOpacity:"1",this.barWidth=e&&e.barWidth?e.barWidth:"12",this.barBorderRadius=e&&e.barBorderRadius?e.barBorderRadius:"5",this.barMargin=e&&e.barMargin?e.barMargin:"1px 0",this.gridBackground=e&&e.gridBackground?e.gridBackground:"#adb5bd",this.gridOpacity=e&&e.gridOpacity?e.gridOpacity:"1",this.gridWidth=e&&e.gridWidth?e.gridWidth:"8",this.gridBorderRadius=e&&e.gridBorderRadius?e.gridBorderRadius:"10",this.gridMargin=e&&e.gridMargin?e.gridMargin:"1px 2px",this.alwaysVisible=!e||"undefined"==typeof e.alwaysVisible||e.alwaysVisible,this.visibleTimeout=e&&e.visibleTimeout?e.visibleTimeout:1e3}}(),l={linear:function(e){return e},inQuad:function(e){return e*e},outQuad:function(e){return e*(2-e)},inOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},inCubic:function(e){return e*e*e},outCubic:function(e){return--e*e*e+1},inOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},inQuart:function(e){return e*e*e*e},outQuart:function(e){return 1- --e*e*e*e},inOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},inQuint:function(e){return e*e*e*e*e},outQuint:function(e){return 1+--e*e*e*e*e},inOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}},a=function(){function e(e,t,r){var s=this;this.viewContainer=e,this.renderer=t,this.document=r,this.interactionSubscriptions=new n.Subscription,this.initWheel=function(){var e=i.Observable.fromEvent(s.el,"DOMMouseScroll"),t=i.Observable.fromEvent(s.el,"mousewheel"),r=i.Observable.merge.apply(i.Observable,[e,t]).subscribe(function(e){var t=0;e.wheelDelta&&(t=-e.wheelDelta/120),e.detail&&(t=e.detail/3),s.scrollContent(t,!0,!1),e.preventDefault&&e.preventDefault()});s.interactionSubscriptions.add(r)},this.initDrag=function(){var e=s.bar,t=i.Observable.fromEvent(s.document.documentElement,"mousemove"),r=i.Observable.fromEvent(s.document.documentElement,"touchmove"),n=i.Observable.fromEvent(e,"mousedown"),o=i.Observable.fromEvent(s.el,"touchstart"),l=i.Observable.fromEvent(s.document.documentElement,"mouseup"),a=i.Observable.fromEvent(s.document.documentElement,"touchend"),d=n.mergeMap(function(r){return s.pageY=r.pageY,s.top=parseFloat(getComputedStyle(e).top),t.map(function(e){return e.preventDefault(),s.top+e.pageY-s.pageY}).takeUntil(l)}),h=o.mergeMap(function(t){return s.pageY=t.targetTouches[0].pageY,s.top=-parseFloat(getComputedStyle(e).top),r.map(function(e){return-(s.top+e.targetTouches[0].pageY-s.pageY)}).takeUntil(a)}),u=i.Observable.merge.apply(i.Observable,[d,h]).subscribe(function(e){s.body.addEventListener("selectstart",s.preventDefaultEvent,!1),s.renderer.setElementStyle(s.body,"touch-action","pan-y"),s.renderer.setElementStyle(s.body,"user-select","none"),s.renderer.setElementStyle(s.bar,"top",e+"px");var t=s.scrollContent(0,!0,!1),r=s.el.offsetHeight-s.bar.offsetHeight;t&&t<0&&-t<=r?s.renderer.setElementStyle(s.el,"paddingTop",-t+"px"):t&&t>0&&t<=r&&s.renderer.setElementStyle(s.el,"paddingBottom",t+"px")}),p=i.Observable.merge.apply(i.Observable,[l,a]).subscribe(function(){s.body.removeEventListener("selectstart",s.preventDefaultEvent,!1);var e=parseInt(s.el.style.paddingTop,10),t=parseInt(s.el.style.paddingBottom,10);s.renderer.setElementStyle(s.body,"touch-action","unset"),s.renderer.setElementStyle(s.body,"user-select","default"),e>0?s.scrollTo(0,300,"linear"):t>0&&s.scrollTo(0,300,"linear")});s.interactionSubscriptions.add(u),s.interactionSubscriptions.add(p)},this.preventDefaultEvent=function(e){e.preventDefault(),e.stopPropagation()},this.viewContainer=e,this.el=e.element.nativeElement,this.body=this.document.querySelector("body"),this.mutationThrottleTimeout=50}return e.prototype.ngOnInit=function(){var e=this;if(this.options=new o(this.options),this.setElementStyle(),this.wrapContainer(),this.initGrid(),this.initBar(),this.getBarHeight(),this.initWheel(),this.initDrag(),this.options.alwaysVisible||this.hideBarAndGrid(),MutationObserver&&(this.mutationObserver=new MutationObserver(function(){e.mutationThrottleTimeout&&(clearTimeout(e.mutationThrottleTimeout),e.mutationThrottleTimeout=setTimeout(e.onMutation.bind(e),50))}),this.mutationObserver.observe(this.el,{subtree:!0,childList:!0})),this.scrollEvents&&this.scrollEvents instanceof t.EventEmitter){var r=this.scrollEvents.subscribe(function(t){return e.handleEvent(t)});this.interactionSubscriptions.add(r)}},e.prototype.ngOnDestroy=function(){this.interactionSubscriptions.unsubscribe()},e.prototype.handleEvent=function(e){if("scrollToBottom"===e.type){t=this.el.scrollHeight-this.el.clientHeight;this.scrollTo(t,e.duration,e.easing)}else if("scrollToTop"===e.type){t=0;this.scrollTo(t,e.duration,e.easing)}else if("scrollToPercent"===e.type&&e.percent>=0&&e.percent<=100){t=Math.round((this.el.scrollHeight-this.el.clientHeight)/100*e.percent);this.scrollTo(t,e.duration,e.easing)}else if("scrollTo"===e.type){var t;(t=e.y)<=this.el.scrollHeight-this.el.clientHeight&&t>=0&&this.scrollTo(t,e.duration,e.easing)}else"recalculate"===e.type&&this.getBarHeight()},e.prototype.setElementStyle=function(){var e=this.el;this.renderer.setElementStyle(e,"overflow","hidden"),this.renderer.setElementStyle(e,"position","relative"),this.renderer.setElementStyle(e,"display","block")},e.prototype.onMutation=function(){this.getBarHeight()},e.prototype.wrapContainer=function(){this.wrapper=this.renderer.createElement(this.el,"div");var e=this.wrapper,t=this.el;this.renderer.setElementClass(e,"slimscroll-wrapper",!0),this.renderer.setElementStyle(e,"position","relative"),this.renderer.setElementStyle(e,"overflow","hidden"),this.renderer.setElementStyle(e,"display","inline-block"),this.renderer.setElementStyle(e,"margin",getComputedStyle(t).margin),this.renderer.setElementStyle(e,"width","100%"),this.renderer.setElementStyle(e,"height",getComputedStyle(t).height),t.parentNode.insertBefore(e,t),e.appendChild(t)},e.prototype.initGrid=function(){this.grid=this.renderer.createElement(this.el,"div");var e=this.grid;this.renderer.setElementClass(e,"slimscroll-grid",!0),this.renderer.setElementStyle(e,"position","absolute"),this.renderer.setElementStyle(e,"top","0"),this.renderer.setElementStyle(e,"bottom","0"),this.renderer.setElementStyle(e,this.options.position,"0"),this.renderer.setElementStyle(e,"width",this.options.gridWidth+"px"),this.renderer.setElementStyle(e,"background",this.options.gridBackground),this.renderer.setElementStyle(e,"opacity",this.options.gridOpacity),this.renderer.setElementStyle(e,"display","block"),this.renderer.setElementStyle(e,"cursor","pointer"),this.renderer.setElementStyle(e,"z-index","99"),this.renderer.setElementStyle(e,"border-radius",this.options.gridBorderRadius+"px"),this.renderer.setElementStyle(e,"margin",this.options.gridMargin),this.wrapper.appendChild(e)},e.prototype.initBar=function(){this.bar=this.renderer.createElement(this.el,"div");var e=this.bar;this.renderer.setElementClass(e,"slimscroll-bar",!0),this.renderer.setElementStyle(e,"position","absolute"),this.renderer.setElementStyle(e,"top","0"),this.renderer.setElementStyle(e,this.options.position,"0"),this.renderer.setElementStyle(e,"width",this.options.barWidth+"px"),this.renderer.setElementStyle(e,"background",this.options.barBackground),this.renderer.setElementStyle(e,"opacity",this.options.barOpacity),this.renderer.setElementStyle(e,"display","block"),this.renderer.setElementStyle(e,"cursor","pointer"),this.renderer.setElementStyle(e,"z-index","100"),this.renderer.setElementStyle(e,"border-radius",this.options.barBorderRadius+"px"),this.renderer.setElementStyle(e,"margin",this.options.barMargin),this.wrapper.appendChild(e)},e.prototype.getBarHeight=function(){var e=Math.max(this.el.offsetHeight/this.el.scrollHeight*this.el.offsetHeight,30)+"px",t=parseInt(e,10)===this.el.offsetHeight?"none":"block";this.renderer.setElementStyle(this.bar,"height",e),this.renderer.setElementStyle(this.bar,"display",t),this.renderer.setElementStyle(this.grid,"display",t)},e.prototype.scrollTo=function(e,t,r){var i=this,n=Date.now(),s=this.el.scrollTop,o=(this.el.offsetHeight,this.bar.offsetHeight,this.el.scrollHeight-this.el.clientHeight),a=Math.max(this.el.offsetHeight/this.el.scrollHeight*this.el.offsetHeight,30),d=parseInt(this.el.style.paddingTop,10)||0,h=parseInt(this.el.style.paddingBottom,10)||0,u=function(p){var c=Date.now(),m=Math.min(1,(c-n)/t),g=l[r](m);if(d>0||h>0){var b=null;d>0&&(b=-(g*(e-(b=-d))+b),i.renderer.setElementStyle(i.el,"paddingTop",b+"px")),h>0&&(b=g*(e-(b=h))+b,i.renderer.setElementStyle(i.el,"paddingBottom",b+"px"))}else i.el.scrollTop=g*(e-s)+s;var y=i.el.scrollTop/o;if(0===h){var f=Math.round(Math.round(i.el.clientHeight*y)-a);f>0&&i.renderer.setElementStyle(i.bar,"top",f+"px")}m<1&&requestAnimationFrame(u)};requestAnimationFrame(u)},e.prototype.scrollContent=function(e,t,r){var i,n=this,s=e,o=this.el.offsetHeight-this.bar.offsetHeight,l=null;return t&&(((s=parseInt(getComputedStyle(this.bar).top,10)+20*e/100*this.bar.offsetHeight)<0||s>o)&&(l=s>o?s-o:s),s=Math.min(Math.max(s,0),o),s=e>0?Math.ceil(s):Math.floor(s),this.renderer.setElementStyle(this.bar,"top",s+"px")),i=parseInt(getComputedStyle(this.bar).top,10)/(this.el.offsetHeight-this.bar.offsetHeight),s=i*(this.el.scrollHeight-this.el.offsetHeight),this.el.scrollTop=s,this.showBarAndGrid(),this.options.alwaysVisible||(this.visibleTimeout&&clearTimeout(this.visibleTimeout),this.visibleTimeout=setTimeout(function(){n.hideBarAndGrid()},this.options.visibleTimeout)),l},e.prototype.showBarAndGrid=function(){this.renderer.setElementStyle(this.grid,"background",this.options.gridBackground),this.renderer.setElementStyle(this.bar,"background",this.options.barBackground)},e.prototype.hideBarAndGrid=function(){this.renderer.setElementStyle(this.grid,"background","transparent"),this.renderer.setElementStyle(this.bar,"background","transparent")},e.prototype.destroy=function(){if(this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null),this.el.parentElement.classList.contains("slimscroll-wrapper")){var e=this.el.parentElement,t=this.el.querySelector(".slimscroll-bar");this.el.removeChild(t),this.unwrap(e)}},e.prototype.unwrap=function(e){for(var t=document.createDocumentFragment();e.firstChild;){var r=e.removeChild(e.firstChild);t.appendChild(r)}e.parentNode.replaceChild(t,e)},e.prototype.onResize=function(e){this.getBarHeight()},e}();a.decorators=[{type:t.Directive,args:[{selector:"[slimScroll]",exportAs:"slimScroll"}]}],a.ctorParameters=function(){return[{type:t.ViewContainerRef,decorators:[{type:t.Inject,args:[t.ViewContainerRef]}]},{type:t.Renderer,decorators:[{type:t.Inject,args:[t.Renderer]}]},{type:undefined,decorators:[{type:t.Inject,args:[r.DOCUMENT]}]}]},a.propDecorators={options:[{type:t.Input}],scrollEvents:[{type:t.Input}],onResize:[{type:t.HostListener,args:["window:resize",["$event"]]}]};var d=function(){return function(){}}();d.decorators=[{type:t.NgModule,args:[{declarations:[a],exports:[a]}]}],d.ctorParameters=function(){return[]},e.SlimScrollEvent=s,e.SlimScrollOptions=o,e.NgSlimScrollModule=d,e.ɵa=a,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-slimscroll.umd.min.js.map
